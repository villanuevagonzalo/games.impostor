@switch (gameState()) {
    @case ('VIEW_ROLE') {
        <div class="card view-role">
            <h2>Turno de</h2>
            <div class="player-name">{{ currentPlayer().name }}</div>
            <span>Pasa el celular a este jugador y presiona "Ver Rol".</span>

            @if (isRevealed()) {
                <div [class]="'role-reveal animate-fade-in ' + currentPlayer().role">
                    @if (currentPlayer().role === 'Citizen') {
                        <h3>Eres Ciudadano</h3>
                        <hr>
                        <div class="clues">
                            <span>Palabra Secreta:</span>
                            <span class="hint">{{ currentWord()?.palabraSecreta }}</span>
                            <span class="category">Categor√≠a: {{ currentWord()?.categoria }}</span>
                        </div>
                    } @else if (currentPlayer().role === 'Impostor') {
                        <h3>Eres el IMPOSTOR</h3>
                        <hr>
                        <div class="clues">
                            <span>Tu pista es:</span>
                            <span class="impostor-hint">{{ currentPlayer().impostorHint }}</span>
                        </div>
                    }
                    <hr>
                    <button (click)="nextTurn()" class="btn-primary mt-4">
                        OK, Entendido
                    </button>
                </div>
            } @else {
                <button (click)="toggleReveal()" class="btn-reveal">
                    Ver Rol
                </button>
            }

            <div class="navigation-buttons">
                <button (click)="previousTurn()" class="btn-secondary" [disabled]="currentTurnIndex() === 0">
                    Anterior
                </button>
                <button (click)="nextTurn()" class="btn-primary">
                    Siguiente
                </button>
            </div>
        </div>
    }

    @case ('PLAYING') {
        <div class="card playing">
            <h2>Juego en Curso</h2>
            <p>Debatan y hagan preguntas para descubrir al Impostor.</p>

            <div class="navigation-buttons">
                <button (click)="previousTurn()" class="btn-secondary">
                    Volver a Roles
                </button>
                <button (click)="startVoting()" class="btn-danger">
                    Votar al Sospechoso
                </button>
            </div>
        </div>
    }

    @case ('VOTING') {
        <div class="card voting">
            <h2>Votaci√≥n</h2>
            <p>¬øQui√©n es el Impostor?</p>

            <ul class="vote-player-list">
                @for (player of players(); track player.name; let i = $index) {
                    <li class="vote-item" (click)="toggleVotingRole(i)" [class.revealed]="revealedVotingRoles().has(i)">
                        <div class="vote-header">
                            <span>{{ player.name }}</span>
                            <span class="reveal-icon">{{ revealedVotingRoles().has(i) ? 'üëÅÔ∏è' : 'üîí' }}</span>
                        </div>

                        @if (revealedVotingRoles().has(i)) {
                            <div class="vote-role" [class]="player.role">
                                <span
                                    class="role-badge">{{ player.role === 'Impostor' ? 'IMPOSTOR' : 'Ciudadano' }}</span>
                            </div>
                        }
                    </li>
                }
            </ul>

            <div class="reveal-word-section">
                <button class="btn-text" (click)="toggleWordReveal()">
                    {{ wordRevealed() ? 'Ocultar Palabra' : 'Revelar Palabra' }}
                </button>
                @if (wordRevealed()) {
                    <div class="word-reveal animate-fade-in">
                        <p class="secret-word">{{ currentWord()?.palabraSecreta }}</p>
                        <p class="category">{{ currentWord()?.categoria }}</p>
                    </div>
                }
            </div>
        </div>
    }
}
<hr>

<button (click)="resetGame()" class="btn-secondary mt-4">
    Reiniciar Juego
</button>